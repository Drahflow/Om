<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"
>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=9"/>
		<title>Om: Evaluation</title>
		<link href="tabs.css" rel="stylesheet" type="text/css"/>
		<script type="text/javascript" src="jquery.js"></script>
		<script type="text/javascript" src="dynsections.js"></script>
		<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
		<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
		<link href="doxygen.css" rel="stylesheet" type="text/css"/>
		<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
	</head>
	<body>
		<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
			<div id="titlearea">
				<table cellspacing="0" cellpadding="0">
					<tbody>
						<tr style="height: 56px;">
							<td id="projectlogo"><img alt="Logo" src="om_small.png"/></td>
							<td style="padding-left: 0.5em;">
								<div id="projectname">Om
								</div>
								<div id="projectbrief">Programming Language</div>
							</td>
							<td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
						</tr>
					</tbody>
				</table>
			</div>
			<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('evaluation.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Evaluation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="evaluation__prefix"></a>
Prefix Notation</h1>
<p>Om uses prefix notation rather than the postfix notation typical of concatenative languages. Prefix notation has the following advantages over postfix notation:</p>
<ul>
<li>Stack underflows are impossible.</li>
<li>Prefix notation more closely models function composition. Instead of storing a data stack in memory, the Om evaluator stores a composed partial function.</li>
<li>The evaluator can read, parse and evaluate the input stream in a single pass, sending results to the output stream as soon as they are evaluated. This cannot be done with a postfix, stack-based language because any data on the stack must remain there as it may be needed by a function later.</li>
<li>Functions can be optimized to only read into memory the data that is required; stack-based postfix languages have no knowledge of the function to apply until the data is already in memory, on the stack.</li>
<li>Incoming data, such as events, become simple to handle at a language level: a program might evaluate to a function that acts as a state machine that processes any additional data appended to the program and transitions to a new state, ready to process new data.</li>
<li>An IDE can provide hints to the user about the data that is expected by a function.</li>
</ul>
<h1><a class="anchor" id="evaluation__functions"></a>
Functions</h1>
<p>Each program evaluates to a function.</p>
<p>A function takes a program as input and returns a program as output, pulling elements from the front of the input program and pushing elements to the back of the output program. Only <em>terms</em> (operators and operands) are significant to functions; separators are discarded from input, and are inserted between output terms in a "normalized" form (for consistent formatting and proper operator separation). Therefore, only input and output terms are relevant in describing a function.</p>
<p>There are three fundamental types of functions:</p>
<ul>
<li><b>Identity</b>: Pushes all input terms onto the output program.</li>
<li><b>Constant</b>: Pushes a term defined by the function, followed by all input terms, onto the output program.</li>
<li><b>Operation</b>: Processes the input terms as follows:<ul>
<li><b>Operand</b>: Processes the operand as data for a computation, defined by the operation, and pushes any terms generated by the computation onto the output program. When the computation is "complete", any additional operands are pushed onto the output program, unchanged.</li>
<li><b>Operator</b>: Pushes the operator, followed by all remaining input terms, onto the output program.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="evaluation__functions__empty"></a>
Empty Program</h2>
<p>The empty program evaluates to the identity function.</p>
<h2><a class="anchor" id="evaluation__functions__single"></a>
Single-Element Programs</h2>
<p>Programs that contain only a single element evaluate to functions as follows:</p>
<ul>
<li><b>Separator</b>: Evaluates to the identity function.</li>
<li><b>Operand</b>: Evaluates to a constant function that pushes the operand, followed by all input terms, onto the output program.</li>
<li><b>Operator</b>: Evaluates to the operation defined for the operator in the environment; if none, evaluates to a constant function that pushes the operator, followed by all input terms, onto the output program.</li>
</ul>
<h2><a class="anchor" id="evaluation__functions__multiple"></a>
Multiple-Element Programs</h2>
<p>Programs that contain multiple elements can be considered a concatenation of sub-programs that each contain one of the elements. The concatenated program thus evaluates to the composition of the functions that each sub-program evaluates to.</p>
<p>For example, program "A B" is the concatenation of programs "A", " ", and "B". The separator evaluates to the identity operation and can be disregarded. The programs "A" and "B" evaluate to functions which will be denoted as <code>A</code> and <code>B</code>, respectively. The input and output are handled by the composed function as follows:</p>
<ul>
<li>Function <code>B</code> receives the input, and sends its output to function <code>A</code>.</li>
<li>Function <code>A</code> receives the input, and its output becomes that of the composed function.</li>
</ul>
<p>Any programs may be concatenated together; however, note that concatenating programs "A" and "B" without an intervening separator would result in a program containing a single operator "AB", which is unrelated to operators "A" or "B".</p>
<h2><a class="anchor" id="evaluation__functions__implementation"></a>
Implementation</h2>
<p>All operation implementations provided are documented in the <a class="el" href="group__operations.html">Operations</a> module.</p>
<h1><a class="anchor" id="evaluation__data_types"></a>
Data Types</h1>
<p>Om uses a unique <em>panmorphic</em> type system, from Ancient Greek πᾶν (pan, "all") and μορφή (morphē, “form”), in which all data values are exposed exclusively through a common immutable interface.</p>
<p>In the case of Om, the common data interface is an operand. Because every data value is entirely represented in the language as an operand, there are no traditional data types in Om. Any operation will accept any operand as a valid input and interrogate its data solely through the program (a sequence of operator, separator, and/or operand) it contains. The operation is then free to process the data however is appropriate, and any operand that it produces as output can then be interrogated and processed by the next operation in the same way.</p>
<h2><a class="anchor" id="evaluation__data_types__implementation"></a>
Implementation</h2>
<p>The actual implementation of operands takes advantage of some optimizations:</p>
<ul>
<li>Although each operand could be treated as a literal array of operand, operator and/or separator elements, each operand in memory contains one of several possible program implementations, each optimized for a specific set of operations. For example, some operations treat separators as insignificant; operands produced by these operations could contain a program implementation that stores only terms (operators and/or operands) and presents a "normalized" separator (such as a line separator) between each term.</li>
<li>Operations can interrogate an input operand for its program implementation type; if it is the optimal implementation type for the operation, the operation can manipulate the operand directly to produce the same result more efficiently.</li>
</ul>
<p>Operations in a program can be ordered by the programmer to increase performance by minimizing conversions between program implementations, but it is not necessary for obtaining a correct computation. Where relevant, an operation will document the program implementation types of its inputs and outputs to allow for this optional level of optimization.</p>
<p>All program implementations provided are documented in the <a class="el" href="group__programs.html">Programs</a> module. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
		<!-- start footer part -->
		<div id="nav-path" class="navpath"><!--
			id is needed for treeview function
		-->
			<ul>
				<li class="footer">Generated for
					<a href="http://om-language.org">Om</a> by
					<a href="http://www.doxygen.org/index.html">
						<img
							class="footer"
							src="doxygen.png"
							alt="doxygen"
						/></a> 1.8.3.1 </li>
			</ul>
		</div>
	</body>
</html>
