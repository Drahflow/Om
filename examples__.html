<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"
>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=9"/>
		<title>Om: Examples</title>
		<link href="tabs.css" rel="stylesheet" type="text/css"/>
		<script type="text/javascript" src="jquery.js"></script>
		<script type="text/javascript" src="dynsections.js"></script>
		<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
		<link href="doxygen.css" rel="stylesheet" type="text/css"/>
		<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
	</head>
	<body>
		<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
			<div id="titlearea">
				<table cellspacing="0" cellpadding="0">
					<tbody>
						<tr style="height: 56px;">
							<td id="projectlogo"><img alt="Logo" src="om_small.png"/></td>
							<td style="padding-left: 0.5em;">
								<div id="projectname">Om
								</div>
								<div id="projectbrief">A Simple Programming Language</div>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
			<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('examples__.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Examples </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The following program contains a single operand containing an operator "<code>Hello,</code>", a separator "<code> </code>", and another operator "<code>world!</code>":</p>
<ul>
<li><code>{Hello, world!}</code> <blockquote class="doxtable">
<p><code>{Hello, world!}</code></p>
</blockquote>
</li>
</ul>
<p>The following program contains a single operand containing an operator "<code>Hello,</code>", a separator "<code> </code>", and an operand "<code>{universe!}</code>" which in turn contains a single operator "<code>universe!</code>":</p>
<ul>
<li><code>{Hello, {universe!}}</code> <blockquote class="doxtable">
<p><code>{Hello, {universe!}}</code></p>
</blockquote>
</li>
</ul>
<p>Note that separators are significant inside operands:</p>
<ul>
<li><code>{Hello, &#160;&#160;world!}</code> <blockquote class="doxtable">
<p><code>{Hello, &#160;&#160;world!}</code></p>
</blockquote>
</li>
</ul>
<p>Operands can be dropped and copied via the <a class="el" href="group__om____operations____drop__operation____.html">drop</a> and <a class="el" href="group__om____operations____copy__operation____.html">copy</a> operations:</p>
<ul>
<li><code>drop {A}{B}{C}</code> <blockquote class="doxtable">
<p><code>{B}{C}</code></p>
</blockquote>
</li>
<li><code>copy {A}{B}{C}</code> <blockquote class="doxtable">
<p><code>{A}{A}{B}{C}</code></p>
</blockquote>
</li>
<li><code>drop copy {A}</code> <blockquote class="doxtable">
<p><code>{A}</code></p>
</blockquote>
</li>
<li><code>copy copy {A}</code> <blockquote class="doxtable">
<p><code>{A}{A}{A}</code></p>
</blockquote>
</li>
</ul>
<p>The <a class="el" href="group__om____operations____drop__operation____.html">drop</a> operation can therefore be used for comments:</p>
<ul>
<li><code>drop {This is a comment.} {This is not a comment.}</code> <blockquote class="doxtable">
<p><code>{This is not a comment.}</code></p>
</blockquote>
</li>
</ul>
<p>The <a class="el" href="group__om____operations____choose__operation____.html">choose</a> operation selects one of two operands, depending on whether a third is empty:</p>
<ul>
<li><code>choose {It was empty.}{It was non-empty.}{I am not empty.}</code> <blockquote class="doxtable">
<p><code>{It was non-empty.}</code></p>
</blockquote>
</li>
<li><code>choose {It was empty.}{It was non-empty.}{}</code> <blockquote class="doxtable">
<p><code>{It was empty.}</code></p>
</blockquote>
</li>
</ul>
<p>An operation without sufficient operands evaluates to itself and whatever operands are provided:</p>
<ul>
<li><code>drop</code> <blockquote class="doxtable">
<p><code>drop</code></p>
</blockquote>
</li>
<li><code>choose {It was empty.}{It was non-empty.}</code> <blockquote class="doxtable">
<p><code>choose{It was empty.}{It was non-empty.}</code></p>
</blockquote>
</li>
</ul>
<p>The <a class="el" href="group__om____operations____quote__operation____.html">quote</a> and <a class="el" href="group__om____operations____dequote__operation____.html">dequote</a> operations add and remove a layer of operand braces, respectively:</p>
<ul>
<li><code>quote {B}</code> <blockquote class="doxtable">
<p><code>{{B}}</code></p>
</blockquote>
</li>
<li><code>dequote {{B}}</code> <blockquote class="doxtable">
<p><code>{B}</code></p>
</blockquote>
</li>
<li><code>dequote {copy}</code> <blockquote class="doxtable">
<p><code>copy</code></p>
</blockquote>
</li>
<li><code>dequote {copy} {A}</code> <blockquote class="doxtable">
<p><code>{A}{A}</code></p>
</blockquote>
</li>
</ul>
<p>Operands can be popped from and pushed into:</p>
<ul>
<li><code>&lt;-characters {ABC}</code> <blockquote class="doxtable">
<p><code>{A}{BC}</code></p>
</blockquote>
</li>
<li><code>-&gt;literal {A}{BC}</code> <blockquote class="doxtable">
<p><code>{ABC}</code></p>
</blockquote>
</li>
<li><code>&lt;-terms {some terms}</code> <blockquote class="doxtable">
<p><code>{some}{terms}</code></p>
</blockquote>
</li>
</ul>
<p>A new operator definition can be provided with the <a class="el" href="group__om____operations____define__operation____.html">define</a> operation, where the first operand is treated as containing a <a class="el" href="group__om____lexicon____.html">Lexicon</a> with operator-to-operand mappings, and the second operand contains the program to evaluate using the defined operator:</p>
<ul>
<li><code>define { double-quote {quote quote} } { double-quote {A} }</code> <blockquote class="doxtable">
<p><code>{{{A}}}</code></p>
</blockquote>
</li>
</ul>
<p>Any string can be used as an operator, with separators and operand braces escaped with a backquote:</p>
<ul>
<li><code>define { double` quote {quote quote} } { double` quote {A} }</code> <blockquote class="doxtable">
<p><code>{{{A}}}</code></p>
</blockquote>
</li>
<li><code>&lt;-terms { double` quote operator }</code> <blockquote class="doxtable">
<p><code>{double` quote}{operator}</code></p>
</blockquote>
</li>
</ul>
<p>Unicode is fully supported:</p>
<ul>
<li><code>&lt;-characters {한글}</code> <blockquote class="doxtable">
<p><code>{한}{글}</code></p>
</blockquote>
</li>
<li><code>&lt;-code` points {한글}</code> <blockquote class="doxtable">
<p><code>{ᄒ}{ᅡᆫ글}</code></p>
</blockquote>
</li>
<li><code>&lt;-terms {한글 韓}</code> <blockquote class="doxtable">
<p><code>{한글}{韓}</code></p>
</blockquote>
</li>
</ul>
<p>Strings are automatically <a href="http://unicode.org/reports/tr15">normalized</a> to <a href="http://unicode.org/reports/tr15/#Norm_Forms">NFD</a>, but can be explicitly normalized to <a href="http://unicode.org/reports/tr15/#Norm_Forms">NFKD</a> using the <a class="el" href="group__om____operations____normalize__operation____.html">normalize</a> operation:</p>
<ul>
<li><code>normalize {2⁵}</code> <blockquote class="doxtable">
<p><code>{25}</code></p>
</blockquote>
</li>
</ul>
<p>Recursion is very efficient in Om, due to (a) the "eager" evaluation model enabled by prefix concatenative syntax (i.e. data is consumed immediately rather than being left on a stack), and (b) the non-recursive evaluation implementation in the evaluator that minimizes memory overhead of recursive calls and prevents stack overflow. The following example uses recursion to give the minutes in a colon-delimited 24-hour time string:</p>
<ul>
<li><code>define<br/>
 { minutes { dequote choose {minutes} {} = {:} &lt;-characters } }<br/>
 { minutes {1:23} }<br/>
 </code> <blockquote class="doxtable">
<p><code>{23}</code></p>
</blockquote>
</li>
</ul>
<p>Each step of an evaluation can be represented as a program. The following is the above program broken down into evaluation steps, where the code that is about to be replaced is <b>bold</b>, and the latest replacement is <em>italicized</em>:</p>
<ul>
<li><code>define<br/>
 { minutes { dequote choose {minutes} {} = {:} &lt;-characters } }<br/>
 { <b>minutes</b> {1:23} }<br/>
 </code></li>
<li><code>define<br/>
 { minutes { dequote choose {minutes} {} = {:} &lt;-characters } }<br/>
 { <em>dequote choose {minutes} {} = {:} &lt;-characters</em> {1:23} }<br/>
 </code></li>
<li><code>define<br/>
 { minutes { dequote choose {minutes} {} = {:} &lt;-characters } }<br/>
 { dequote choose {minutes} {} = {:} <b>&lt;-characters {1:23}</b> }<br/>
 </code></li>
<li><code>define<br/>
 { minutes { dequote choose {minutes} {} = {:} &lt;-characters } }<br/>
 { dequote choose {minutes} {} = {:} <em>{1} {:23}</em> }<br/>
 </code></li>
<li><code>define<br/>
 { minutes { dequote choose {minutes} {} = {:} &lt;-characters } }<br/>
 { dequote choose {minutes} {} <b>= {:} {1}</b> {:23} }<br/>
 </code></li>
<li><code>define<br/>
 { minutes { dequote choose {minutes} {} = {:} &lt;-characters } }<br/>
 { dequote choose {minutes} {} <em>{}</em> {:23} }<br/>
 </code></li>
<li><code>define<br/>
 { minutes { dequote choose {minutes} {} = {:} &lt;-characters } }<br/>
 { dequote <b>choose {minutes} {} {}</b> {:23} }<br/>
 </code></li>
<li><code>define<br/>
 { minutes { dequote choose {minutes} {} = {:} &lt;-characters } }<br/>
 { dequote <em>{minutes}</em> {:23} }<br/>
 </code></li>
<li><code>define<br/>
 { minutes { dequote choose {minutes} {} = {:} &lt;-characters } }<br/>
 { <b>dequote {minutes}</b> {:23} }<br/>
 </code></li>
<li><code>define<br/>
 { minutes { dequote choose {minutes} {} = {:} &lt;-characters } }<br/>
 { <em>minutes</em> {:23} }<br/>
 </code></li>
<li><code>define<br/>
 { minutes { dequote choose {minutes} {} = {:} &lt;-characters } }<br/>
 { <b>minutes</b> {:23} }<br/>
 </code></li>
<li><code>define<br/>
 { minutes { dequote choose {minutes} {} = {:} &lt;-characters } }<br/>
 { <em>dequote choose {minutes} {} = {:} &lt;-characters</em> {:23} }<br/>
 </code></li>
<li><code>define<br/>
 { minutes { dequote choose {minutes} {} = {:} &lt;-characters } }<br/>
 { dequote choose {minutes} {} = {:} <b>&lt;-characters {:23}</b> }<br/>
 </code></li>
<li><code>define<br/>
 { minutes { dequote choose {minutes} {} = {:} &lt;-characters } }<br/>
 { dequote choose {minutes} {} = {:} <em>{:} {23}</em> }<br/>
 </code></li>
<li><code>define<br/>
 { minutes { dequote choose {minutes} {} = {:} &lt;-characters } }<br/>
 { dequote choose {minutes} {} <b>= {:} {:}</b> {23} }<br/>
 </code></li>
<li><code>define<br/>
 { minutes { dequote choose {minutes} {} = {:} &lt;-characters } }<br/>
 { dequote choose {minutes} {} <em>{{:}}</em> {23} }<br/>
 </code></li>
<li><code>define<br/>
 { minutes { dequote choose {minutes} {} = {:} &lt;-characters } }<br/>
 { dequote <b>choose {minutes} {} {{:}}</b> {23} }<br/>
 </code></li>
<li><code>define<br/>
 { minutes { dequote choose {minutes} {} = {:} &lt;-characters } }<br/>
 { dequote <em>{}</em> {23} }<br/>
 </code></li>
<li><code>define<br/>
 { minutes { dequote choose {minutes} {} = {:} &lt;-characters } }<br/>
 { <b>dequote {}</b> {23} }<br/>
 </code></li>
<li><code>define<br/>
 { minutes { dequote choose {minutes} {} = {:} &lt;-characters } }<br/>
 { {23} }<br/>
 </code></li>
<li><code><b>define<br/>
 { minutes { dequote choose {minutes} {} = {:} &lt;-characters } }<br/>
 { {23} }</b><br/>
 </code></li>
<li><code><em>{23}</em></code></li>
</ul>
<p>The <a class="el" href="group__om____operations____rearrange__operation____.html">rearrange</a> operation provides operand name binding, allowing for a more applicative style. The following example is a simplistic implementation of a left <a href="http://en.wikipedia.org/wiki/Fold_(higher-order_function)">fold</a>, along with an example call: </p>
<pre class="fragment">define
{
	Fold&lt;- {
		rearrange
		{
			rearrange
			{
				dequote
				choose
				quote Result
				pair pair pair {Fold&lt;-} Function Result Remainder
				Remainder
			}
			{Result Remainder}
			dequote Function Base &lt;-terms Source
		}
		{Function Base Source}
	}
}
{
	Fold&lt;- {literal&lt;-} {} {1 2 3}
}
</pre><p>The result is <code>{321}</code>.</p>
<p>The example works as follows:</p>
<ul>
<li><code>Fold&lt;-</code> takes three operands:<ul>
<li><code>Function</code></li>
<li><code>Base</code></li>
<li><code>Source</code></li>
</ul>
</li>
<li>The first term is popped from the <code>Source</code>.</li>
<li>The <code>Function</code> is applied to:<ul>
<li>the <code>Base</code></li>
<li>the popped first term of the <code>Source</code></li>
<li>the remainder of the <code>Source</code></li>
<li>the remainder of the input program</li>
</ul>
</li>
<li>The first two operands output by the <code>Function</code> are:<ul>
<li><code>Result</code></li>
<li><code>Remainder</code></li>
</ul>
</li>
<li>If the <code>Remainder</code> is empty, the <code>Result</code> is output. Otherwise, <code>Function</code>, <code>Result</code>, and <code>Remainder</code> are passed to a recursive <code>Fold&lt;-</code> call.</li>
</ul>
<p>A few things should be noted about the above example:</p>
<ul>
<li>The <a class="el" href="group__om____operations____.html">Operations</a> list is very short at the moment; as it expands, higher-level constructs should allow for simplification of algorithms such as this one.</li>
<li>When reading Om code, it can be difficult to mentally group operations with the operands they consume (contrasted with Scheme, in which they are grouped at design time with parentheses). However, it should be possible for an Om integrated development environment to generate a graphical indication of these groupings dynamically. </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
		<!-- start footer part -->
	</body>
</html>
